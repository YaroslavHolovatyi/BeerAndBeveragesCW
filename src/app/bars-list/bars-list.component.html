<div class="bars-list-page">
  <div class="container py-4">
    <h1 class="text-white mb-4">List of Pubs</h1>

    <!-- Filters Section -->
    <div class="filters-container bg-dark text-white p-4 rounded mb-4 border border-secondary">
      <div class="row g-3">
        <!-- City Autocomplete -->
        <div class="col-md-6">
          <label for="cityInput" class="form-label">City</label>
          <div class="d-flex gap-2">
            <div class="position-relative flex-grow-1">
              <input
                type="text"
                id="cityInput"
                class="form-control bg-dark text-white border-secondary"
                placeholder="Start typing city name..."
                [(ngModel)]="selectedCity"
                (input)="onCityInput($event)"
                autocomplete="off"
              />
              <div
                *ngIf="showCityDropdown"
                class="city-dropdown bg-dark border border-secondary rounded mt-1 position-absolute w-100"
              >
                <button
                  *ngFor="let city of filteredCities"
                  type="button"
                  class="dropdown-item text-white bg-dark border-0 text-start p-2 city-dropdown-item"
                  (click)="selectCity(city)"
                >
                  {{ city }}
                </button>
              </div>
            </div>
            <button
              type="button"
              class="btn btn-warning map-button-small"
              (click)="openCityModal()"
            >
              <i class="fas fa-map"></i> Map
            </button>
          </div>
        </div>

        <!-- Drink Type Checkboxes -->
        <div class="col-md-6">
          <label class="form-label">Drink Types</label>
          <div class="d-flex flex-wrap gap-3">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="beerCheck"
                [(ngModel)]="drinkTypes.beer"
                (change)="onDrinkTypeChange()"
              />
              <label class="form-check-label" for="beerCheck"> Beer </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="wineCheck"
                [(ngModel)]="drinkTypes.wine"
                (change)="onDrinkTypeChange()"
              />
              <label class="form-check-label" for="wineCheck"> Wine </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="shotsCheck"
                [(ngModel)]="drinkTypes.shots"
                (change)="onDrinkTypeChange()"
              />
              <label class="form-check-label" for="shotsCheck"> Shots </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="drinksCheck"
                [(ngModel)]="drinkTypes.drinks"
                (change)="onDrinkTypeChange()"
              />
              <label class="form-check-label" for="drinksCheck"> Drinks </label>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-12">
          <button class="btn btn-secondary" (click)="clearFilters()">Clear Filters</button>
        </div>
      </div>
    </div>

    <!-- Bars List -->
    <div class="bars-grid">
      <app-bar-card *ngFor="let bar of bars" [bar]="bar"></app-bar-card>
    </div>
  </div>
</div>

<!-- City Selector Modal -->
<app-city-selector-modal
  [isOpen]="showCityModal"
  [title]="'Select City to Find Bars'"
  [initialCity]="selectedCityObj"
  (cityConfirmed)="onCityConfirmed($event)"
  (modalClosed)="onModalClosed()"
>
</app-city-selector-modal>
